<div class="graphics-container">
  <div class="graphic-one">
    <apx-chart
      [series]="chartOptions.series"
      [chart]="chartOptions.chart"
      [plotOptions]="chartOptions.plotOptions"
      [xaxis]="chartOptions.xaxis"
      [yaxis]="chartOptions.yaxis"
      [title]="chartOptions.title"
      [tooltip]="chartOptions.tooltip"
      [fill]="chartOptions.fill"
      [colors]="chartOptions.colors"
      [legend]="chartOptions.legend"
      [stroke]="chartOptions.stroke"
      ></apx-chart>
      <hr>

      <div class="total-footprint">
        <p>Total Footprint</p>
        <p class="total  placeholder-glow" *ngIf="totalAlcance == null" style="width: 8rem;">
          <span class="placeholder" style="width: 8rem; height: 2rem; border-radius: 12px;"></span>
      </p>
        <p class="total" *ngIf="totalAlcance !== null">{{totalAlcance.toFixed(2)}}<span>tCO2</span></p>
      </div>
  </div>
  <div class="graphic-two">
    <div class="alcance-container">
      <div class="alcance-icon">
        <i class="fa-solid fa-fire"></i>
      </div>
      <section class="alcance-uno">
        <p class="alcance-text" >Alcance 1</p>
        <p class="porcent">{{alcanceUno}}%</p>
        <p class="total  placeholder-glow" *ngIf="totalAlcance == null" style="width: 6rem; margin-right: -1rem;">
          <span class="placeholder col-8" style="height: 2rem; border-radius: 12px"></span>
      </p>
        <p class="total" *ngIf="totalAlcanceUno !== null">{{totalAlcanceUno.toFixed(2)}}<span>tCO2</span></p>
      </section>
    </div>
    <div class="alcance-container">
      <div class="alcance-icon">
        <i class="fa-solid fa-plug-circle-exclamation"></i>
      </div>
      <section class="alcance-dos">
        <p class="alcance-text">Alcance 2</p>
        <p class="porcent">{{alcanceDos}}%</p>
        <p class="total  placeholder-glow" *ngIf="totalAlcance == null" style="width: 6rem; margin-right: -1rem;">
          <span class="placeholder col-8" style="height: 2rem; border-radius: 12px"></span>
      </p>
        <p class="total" *ngIf="totalAlcanceDos !== null">{{totalAlcanceDos.toFixed(2)}}<span>tCO2</span></p>
      </section>
    </div>
    <div class="alcance-container">
      <div class="alcance-icon">
        <i class="fa-solid fa-explosion"></i>
      </div>
      <section class="alcance-tres">
        <p class="alcance-text">Alcance 3</p>
        <p class="porcent">{{alcanceTres}}%</p>
        <p class="total  placeholder-glow" *ngIf="totalAlcance == null" style="width: 6rem; margin-right: -1rem;">
          <span class="placeholder col-8" style="height: 2rem; border-radius: 12px"></span>
      </p>
        <p class="total" *ngIf="totalAlcanceTres !== null">{{totalAlcanceTres.toFixed(2)}}<span>tCO2</span></p>
      </section>
    </div>
  </div>
</div>

<div class="table-container">
<div class="tab-container">
  <h2>Detalle por Alcance</h2>
  <ul class="nav nav-pills">
    <li class="nav-item">
      <button class="nav-link nav-link__left" [class.active]="selectedAlcance === 'all'" aria-current="page" (click)="setAlcance('all')">ALL ALCANCES</button>
    </li>
    <li class="nav-item">
      <button class="nav-link" [class.active]="selectedAlcance === 'alcanceUno'"  (click)="setAlcance('alcanceUno')">ALCANCE 1</button>
    </li>
    <li class="nav-item">
      <button class="nav-link" [class.active]="selectedAlcance === 'alcanceDos'" (click)="setAlcance('alcanceDos')">ALCANCE 2</button>
    </li>
    <li class="nav-item">
      <button class="nav-link nav-link__right" [class.active]="selectedAlcance === 'alcanceTres'" (click)="setAlcance('alcanceTres')">ALCANCE 3</button>
    </li>
  </ul>
</div>
<hr>
<table class="table table-striped">
  <thead>
    <tr>
      <th class="category-column">Categor√≠a</th>
      <th class="co2-column">tCO2</th>
      <th class="progress-column"></th>
    </tr>
  </thead>
  <tbody>
    <ng-container *ngFor="let item of filteredCategories">
      <tr>
        <td class="category-column">{{ getCategoryName(item.key) }}</td>
        <td class="co2-column">
          {{ (item.value / 1000).toFixed(2) }}
          ({{ getPercentage(item.value, getTotalForAllAlcances()) | number:'1.0-2' }}%)
        </td>
        <td class="progress-column">
          <div class="bar-container">
            <div class="bar"
                 [ngStyle]="{
                   'width': getRelativePercentage(item.value) + '%',
                   'background-color': getBarColor(item.alcance)
                 }"></div>
          </div>
        </td>
      </tr>
    </ng-container>
  </tbody>
</table>
</div>









